[0;35m========================================[0m
[0;35m文章管理功能测试[0m
[0;35m========================================[0m
测试时间: Tue Oct 21 18:44:09 CST 2025
测试URL: http://localhost:8088/api
测试用户: posttest_1761043449

[1;33m设置测试用户...[0m
注册响应: {"code":201,"message":"用户注册成功","data":{"email":"posttest_1761043449@example.com","user_id":7,"username":"posttest_1761043449"}}
登录响应: {"code":200,"message":"登录成功","data":{"email":"posttest_1761043449@example.com","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjo3LCJ1c2VybmFtZSI6InBvc3R0ZXN0XzE3NjEwNDM0NDkiLCJleHAiOjE3NjExMjk4NDksImlhdCI6MTc2MTA0MzQ0OX0.J0ya6pljWHnKc_LIheHpCKZ10dvOgpHU45FbFupI3BU","user_id":7,"username":"posttest_1761043449"}}
[0;32m✓ 用户设置成功，获取到JWT token[0m
JWT Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...

[0;34m=== 步骤 1: 文章创建功能测试 ===[0m
[1;33m执行测试: 已认证用户创建文章[0m
head: illegal line count -- -1
响应状态码: 201
响应内容: 
[0;32m✓ 已认证用户创建文章: 通过[0m
[0;36m详情: 成功创建文章[0m

创建的文章ID: 
[1;33m执行测试: 未认证用户创建文章[0m
请求: POST /posts
head: illegal line count -- -1
响应状态码: 401
响应内容: 
[0;32m✓ 未认证用户创建文章: 通过[0m
[0;36m详情: 状态码匹配: 401[0m

[1;33m执行测试: 无效数据创建文章[0m
请求: POST /posts
head: illegal line count -- -1
响应状态码: 400
响应内容: 
[0;32m✓ 无效数据创建文章: 通过[0m
[0;36m详情: 状态码匹配: 400[0m

[1;33m执行测试: 缺少内容字段创建文章[0m
请求: POST /posts
head: illegal line count -- -1
响应状态码: 400
响应内容: 
[0;32m✓ 缺少内容字段创建文章: 通过[0m
[0;36m详情: 状态码匹配: 400[0m


[0;34m=== 步骤 2: 文章读取功能测试 ===[0m
[1;33m执行测试: 获取所有文章列表[0m
请求: GET /posts
head: illegal line count -- -1
响应状态码: 200
响应内容: 
[0;32m✓ 获取所有文章列表: 通过[0m
[0;36m详情: 状态码匹配: 200[0m

[0;36mℹ 获取单个文章详情: 信息[0m
[0;36m详情: 跳过测试，因为未创建文章[0m

[1;33m执行测试: 获取不存在的文章[0m
请求: GET /posts/99999
head: illegal line count -- -1
响应状态码: 404
响应内容: 
[0;32m✓ 获取不存在的文章: 通过[0m
[0;36m详情: 状态码匹配: 404[0m


[0;34m=== 步骤 3: 文章更新功能测试 ===[0m
[0;36mℹ 文章作者更新自己的文章: 信息[0m
[0;36m详情: 跳过测试，因为未创建文章[0m

[0;36mℹ 未认证用户更新文章: 信息[0m
[0;36m详情: 跳过测试，因为未创建文章[0m

[1;33m执行测试: 更新不存在的文章[0m
请求: PUT /posts/99999
head: illegal line count -- -1
响应状态码: 404
响应内容: 
[0;32m✓ 更新不存在的文章: 通过[0m
[0;36m详情: 状态码匹配: 404[0m


[0;34m=== 步骤 4: 文章删除功能测试 ===[0m
[0;36mℹ 文章作者删除自己的文章: 信息[0m
[0;36m详情: 跳过测试，因为未创建文章[0m

[1;33m执行测试: 未认证用户删除文章[0m
请求: DELETE /posts/1
head: illegal line count -- -1
响应状态码: 401
响应内容: 
[0;32m✓ 未认证用户删除文章: 通过[0m
[0;36m详情: 状态码匹配: 401[0m

[1;33m执行测试: 删除不存在的文章[0m
请求: DELETE /posts/99999
head: illegal line count -- -1
响应状态码: 404
响应内容: 
[0;32m✓ 删除不存在的文章: 通过[0m
[0;36m详情: 状态码匹配: 404[0m


[0;34m=== 步骤 5: 权限控制测试 ===[0m
[1;33m创建第二个用户进行权限测试...[0m
第二个用户注册响应: {"code":201,"message":"用户注册成功","data":{"email":"posttest2_1761043450@example.com","user_id":8,"username":"posttest2_1761043450"}}
第二个用户登录响应: {"code":200,"message":"登录成功","data":{"email":"posttest2_1761043450@example.com","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjo4LCJ1c2VybmFtZSI6InBvc3R0ZXN0Ml8xNzYxMDQzNDUwIiwiZXhwIjoxNzYxMTI5ODUwLCJpYXQiOjE3NjEwNDM0NTB9.wOXh3Rk1e3TrFgXQlsdV1uAqdtDZJ5g5X4RtKxpSkro","user_id":8,"username":"posttest2_1761043450"}}
[0;32m✓ 第二个用户设置成功[0m
[1;33m第二个用户创建文章...[0m
head: illegal line count -- -1
第二个用户创建文章响应: 
第二个用户创建的文章ID: 

[0;35m========================================[0m
[0;35m文章管理功能测试总结[0m
[0;35m========================================[0m
总测试数: 13
通过: [0;32m9[0m
失败: [0;31m0[0m

[0;32m🎉 所有测试通过！文章管理功能正常[0m
